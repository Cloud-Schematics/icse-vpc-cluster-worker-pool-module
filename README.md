# ICSE Worker Pool Module

This module creates a single worker pool in an existing IBM Cloud VPC cluster.

## Module Variables

Name              | Type                                                                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                 | Sensitive | Default
----------------- | --------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ---------
prefix            | string                                                                                        | The prefix that you would like to prepend to your resources                                                                                                                                                                                                                                                                                                                                                                 |           | 
resource_group_id | string                                                                                        | Resource group ID where the cluster will be provisioned.                                                                                                                                                                                                                                                                                                                                                                    |           | null
tags              | list(string)                                                                                  | List of Tags for the resource created                                                                                                                                                                                                                                                                                                                                                                                       |           | null
vpc_id            | string                                                                                        | ID of the VPC where the cluster will be provisioned                                                                                                                                                                                                                                                                                                                                                                         |           | 
subnet_zone_list  | list( object({ name = string id = string zone = optional(string) cidr = optional(string) }) ) | List of subnets in the VPC where gateways and reserved IPs will be provisioned. This value is intended to use the `subnet_zone_list` output from the ICSE VPC Subnet Module (https://github.com/Cloud-Schematics/vpc-subnet-module) or from templates using that module for subnet creation.                                                                                                                                |           | 
cluster_id        | string                                                                                        | GUID of Cluster where worker pool will be provisioned                                                                                                                                                                                                                                                                                                                                                                       |           | 
pool_name         | string                                                                                        | Worker pool name. (Prefix will be prepended to the beginning of the pool name)                                                                                                                                                                                                                                                                                                                                              |           | 
flavor            | string                                                                                        | Machine type for cluster. Use the IBM Cloud CLI command `ibmcloud ks flavors` to find valid machine types                                                                                                                                                                                                                                                                                                                   |           | bx2.16x64
workers_per_zone  | number                                                                                        | Number of workers in each zone of the worker pool.                                                                                                                                                                                                                                                                                                                                                                          |           | 2
entitlement       | string                                                                                        | If you do not have an entitlement, leave as null. Entitlement reduces additional OCP Licence cost in OpenShift clusters. Use Cloud Pak with OCP Licence entitlement to create the OpenShift cluster. Note It is set only when the first time creation of the cluster, further modifications are not impacted Set this argument to cloud_pak only if you use the cluster with a Cloud Pak that has an OpenShift entitlement. |           | null
encryption_key_id | string                                                                                        | OPTIONAL - Encryption key ID for worker pool. Used with `kms_instance_guid`                                                                                                                                                                                                                                                                                                                                                 |           | null
kms_instance_guid | string                                                                                        | OPTIONAL - GUID of the KMS instance where `encrption_key` is provisioned. Use with `encryption_key_id`.                                                                                                                                                                                                                                                                                                                     |           | null

## Module Outputs

Name        | Description
----------- | ---------------------------------------------------------------------------------------------------
composed_id | The unique identifier of the worker pool. The ID is composed of <cluster_name_id>/<worker_pool_id>.
pool_id     | Unique ID for the worker pool
